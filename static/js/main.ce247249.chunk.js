(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(55),s=a.n(c),o=a(13),i=a(7),l=a(67),u=a(6),p=a.n(u),m=a(16),h=a(10),d=a(11),f=a(14),g=a(12),v=a(15),E=a(56),b=a.n(E),k=(a(99),a(57)),y=a.n(k).a.create({baseURL:"https://cptech-omnistack.herokuapp.com/"}),j=a(58),w=a.n(j),O=a(59),x=a.n(O),C=a(60),S=a.n(C),L=a(61),D=a.n(L),I=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={feed:[]},a.handleLike=function(){var e=Object(m.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post("posts/".concat(t,"/like"));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.registerToSocket=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=b()("http://localhost:3333")).on("post",function(e){a.setState({feed:[e].concat(Object(l.a)(a.state.feed))})}),t.on("like",function(e){var t=a.state.feed.map(function(t){return t._id===e._id?e:t});a.setState({feed:t})});case 3:case"end":return e.stop()}},e)})),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerToSocket(),e.next=3,y.get("posts");case 3:t=e.sent,this.setState({feed:t.data});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("section",{id:"post-list"},this.state.feed.map(function(t){return r.a.createElement("article",{key:t._id},r.a.createElement("header",null,r.a.createElement("div",{className:"user-info"},r.a.createElement("span",null,t.author),r.a.createElement("span",{className:"place"},t.place)),r.a.createElement("img",{src:w.a,alt:"Mais"})),r.a.createElement("img",{src:"https://cptech-omnistack-test.s3.amazonaws.com/".concat(t.image),alt:"{post.image}"}),r.a.createElement("footer",null,r.a.createElement("div",{className:"actions"},r.a.createElement("button",{type:"button",onClick:function(){return e.handleLike(t._id)}},r.a.createElement("img",{src:x.a,alt:"Like"})),r.a.createElement("img",{src:S.a,alt:"Comment"}),r.a.createElement("img",{src:D.a,alt:"Send"})),r.a.createElement("strong",null,t.likes," curtidas"),r.a.createElement("p",null,t.description,r.a.createElement("span",null,t.hashtags))))}))}}]),t}(n.Component),N=a(62),_=(a(116),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={image:null,author:"",place:"",description:"",hashtags:""},a.handleSubmit=function(){var e=Object(m.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("image",a.state.image),n.append("author",a.state.author),n.append("place",a.state.place),n.append("description",a.state.description),n.append("hashtags",a.state.hashtags),e.next=9,y.post("posts",n);case 9:a.props.history.push("/");case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleImageChange=function(e){a.setState({image:e.target.files[0]})},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{id:"new-post",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"file",onChange:this.handleImageChange}),r.a.createElement("input",{type:"text",name:"author",placeholder:"Author do post",onChange:this.handleChange,value:this.state.author}),r.a.createElement("input",{type:"text",name:"place",placeholder:"Local do post",onChange:this.handleChange,value:this.state.place}),r.a.createElement("input",{type:"text",name:"description",placeholder:"Descri\xe7\xe3o do post",onChange:this.handleChange,value:this.state.description}),r.a.createElement("input",{type:"text",name:"hashtags",placeholder:"Hashtags do post",onChange:this.handleChange,value:this.state.hashtags}),r.a.createElement("button",{type:"submit"},"Enviar"))}}]),t}(n.Component));var A=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:I}),r.a.createElement(i.a,{path:"/new",component:_}))},J=(a(121),a(65)),M=a.n(J),R=a(66),T=a.n(R),z=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{id:"main-header"},r.a.createElement("div",{className:"header-content"},r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{src:M.a,alt:"InstaRocket"})),r.a.createElement(o.b,{to:"/new"},r.a.createElement("img",{src:T.a,alt:"Enviar publica\xe7\xe3o"}))))}}]),t}(n.Component);var B=function(){return r.a.createElement(o.a,null,r.a.createElement(z,null),r.a.createElement(A,null))};a(122);s.a.render(r.a.createElement(B,null),document.getElementById("root"))},58:function(e,t,a){e.exports=a.p+"static/media/more.22d960a9.svg"},59:function(e,t,a){e.exports=a.p+"static/media/like.00e13584.svg"},60:function(e,t,a){e.exports=a.p+"static/media/comment.e2a49935.svg"},61:function(e,t,a){e.exports=a.p+"static/media/send.55e74cfd.svg"},65:function(e,t,a){e.exports=a.p+"static/media/logo.83fd0bcc.svg"},66:function(e,t,a){e.exports=a.p+"static/media/camera.787c6af9.svg"},68:function(e,t,a){e.exports=a(123)},96:function(e,t){},99:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.ce247249.chunk.js.map