{"version":3,"sources":["services/api.js","pages/Feed.js","pages/New.js","routes.js","components/Header.js","App.js","index.js","assets/more.svg","assets/like.svg","assets/comment.svg","assets/send.svg","assets/logo.svg","assets/camera.svg"],"names":["api","axios","create","baseURL","Feed","state","feed","handleLike","_callee","id","regenerator_default","a","wrap","_context","prev","next","post","concat","stop","registerToSocket","_callee2","socket","_context2","io","on","newPost","_this","setState","Object","toConsumableArray","likedPost","newFeed","map","_id","this","get","response","data","_this2","react_default","createElement","key","className","author","place","src","more","alt","image","type","onClick","like","comment","send","likes","description","hashtags","Component","New","handleSubmit","e","preventDefault","FormData","append","props","history","push","handleImageChange","target","files","handleChange","defineProperty","name","value","onSubmit","onChange","placeholder","Routes","react_router","path","exact","component","Header","react_router_dom","to","logo","camera","App","basename","Header_Header","routes","ReactDOM","render","src_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.dad5c439.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://cptech-omnistack.herokuapp.com/',\n});\n\nexport default api;\n","import React, { Component } from 'react';\nimport io from 'socket.io-client';\n\nimport './Feed.css'\nimport api from '../services/api';\n\nimport more from '../assets/more.svg';\nimport like from '../assets/like.svg';\nimport comment from '../assets/comment.svg';\nimport send from '../assets/send.svg';\n\nclass Feed extends Component {\n  state = {\n    feed: [],\n  }\n\n  async componentDidMount() {\n    this.registerToSocket();\n\n    let response = await api.get('posts');\n    this.setState({ feed: response.data });\n  }\n\n  handleLike = async id => {\n    await api.post(`posts/${id}/like`);\n  }\n\n  registerToSocket = async () => {\n    const socket = io('https://cptech-omnistack.herokuapp.com');\n    // post, like\n\n    socket.on('post', newPost => {\n      this.setState({ feed: [newPost, ...this.state.feed] })\n    })\n\n    socket.on('like', likedPost => {\n      const newFeed = this.state.feed.map(post => \n        (post._id === likedPost._id ? likedPost : post)\n      )\n      this.setState({feed: newFeed})\n    })\n  };\n\n  render() {\n    return (\n      <section id=\"post-list\">\n        {this.state.feed.map(post => (\n          <article key={post._id}>\n            <header>\n              <div className=\"user-info\">\n                <span>{post.author}</span>\n                <span className=\"place\">{post.place}</span>\n              </div>\n\n              <img src={more} alt=\"Mais\" />\n            </header>\n\n            <img src={`https://cptech-omnistack-test.s3.amazonaws.com/${post.image}`} alt=\"{post.image}\" />\n\n            <footer>\n              <div className=\"actions\">\n                <button type=\"button\" onClick={() => this.handleLike(post._id)}>\n                  <img src={like} alt=\"Like\" />\n                </button>\n                <img src={comment} alt=\"Comment\" />\n                <img src={send} alt=\"Send\" />\n              </div>\n\n              <strong>{post.likes} curtidas</strong>\n\n              <p>\n                {post.description}\n                <span>{post.hashtags}</span>\n              </p>\n            </footer>\n          </article>\n        ))}\n      </section>\n    );\n  }\n}\n\nexport default Feed;\n","import React, { Component } from 'react';\nimport './New.css';\nimport api from '../services/api';\n\nclass New extends Component {\n  state = {\n    image: null,\n    author: '',\n    place: '',\n    description: '',\n    hashtags: '',\n  };\n\n  handleSubmit = async e => {\n    e.preventDefault();\n\n    const data = new FormData();\n\n    data.append('image', this.state.image);\n    data.append('author', this.state.author);\n    data.append('place', this.state.place);\n    data.append('description', this.state.description);\n    data.append('hashtags', this.state.hashtags);\n\n    await api.post('posts', data);\n\n    this.props.history.push('/');\n  }\n\n  handleImageChange = e => {\n    this.setState({ image: e.target.files[0] })\n  }\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  render() {\n    return (\n      <form id=\"new-post\" onSubmit={this.handleSubmit}>\n        <input type=\"file\"\n        onChange={this.handleImageChange} />\n\n        <input\n          type=\"text\"\n          name=\"author\"\n          placeholder=\"Author do post\"\n          onChange={this.handleChange}\n          value={this.state.author} />\n\n        <input\n          type=\"text\"\n          name=\"place\"\n          placeholder=\"Local do post\"\n          onChange={this.handleChange}\n          value={this.state.place} />\n\n        <input\n          type=\"text\"\n          name=\"description\"\n          placeholder=\"Descrição do post\"\n          onChange={this.handleChange}\n          value={this.state.description} />\n\n        <input\n          type=\"text\"\n          name=\"hashtags\"\n          placeholder=\"Hashtags do post\"\n          onChange={this.handleChange}\n          value={this.state.hashtags} />\n\n        <button type=\"submit\">\n          Enviar\n        </button>\n      </form>\n    );\n  }\n}\n\nexport default New;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport Feed from './pages/Feed';\nimport New from './pages/New';\n\nfunction Routes() {\n  return (\n    <Switch>\n      <Route path=\"/\" exact component={Feed} />\n      <Route path=\"/new\" component={New} />\n    </Switch>\n  )\n}\n\nexport default Routes;","import React, {Component} from 'react';\nimport { Link } from 'react-router-dom';\n\nimport './Header.css'\n\nimport logo from '../assets/logo.svg'\nimport camera from '../assets/camera.svg'\n\nexport default class Header extends Component {\n\n  render() {\n    return (\n      <header id='main-header'>\n        <div className='header-content'>\n          <Link to=\"/\">\n            <img src={logo} alt=\"InstaRocket\" />\n          </Link>\n          <Link to=\"/new\">\n            <img src={camera} alt=\"Enviar publicação\" />\n          </Link>\n        </div>\n      </header>\n    )\n  }\n};\n","import React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport Routes from './routes';\nimport Header from './components/Header';\n\nfunction App() {\n  return (\n    <BrowserRouter basename=\"/cptech-omnistack-front\">\n      <Header />\n      <Routes />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './global.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/more.22d960a9.svg\";","module.exports = __webpack_public_path__ + \"static/media/like.00e13584.svg\";","module.exports = __webpack_public_path__ + \"static/media/comment.e2a49935.svg\";","module.exports = __webpack_public_path__ + \"static/media/send.55e74cfd.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.83fd0bcc.svg\";","module.exports = __webpack_public_path__ + \"static/media/camera.787c6af9.svg\";"],"sourceRoot":""}